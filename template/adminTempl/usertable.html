{% extends "adminTempl/admin_main.html" %}
{% block content %}





<div class="container-fluid ">
    <div class=" mt-5 ">
        <h1 class="">User table</h1>

    </div>
    <div class="table-responsive">
        <table id="myTable" class="display">
            <thead>
                <tr>

                    <th>first name</th>
                    <th>last name</th>
                    <th>username</th>
                    <th>email</th>
                    <th>number</th>
                    <th>date joined</th>
                    <th>block or unblock</th>

                </tr>
            </thead>

            <tbody>
                {% for i in user %}
                <tr>
                    <td>{{i.first_name}}</td>
                    <td>{{i.last_name}}</td>
                    <td>{{i.username}}</td>
                    <td>{{i.email}}</td>
                    <td>{{i.number}}</td>
                    <td>{{i.date_joined}}</td>
                    <td>
                        {% if i.block == 1 %}
                        <button data-id={{i.id}} class="btn bg-primary text-light blockBtn">unblock</button>
                        {% else %}
                        <button data-id={{i.id}} class="btn bg-danger text-light blockBtn">block</button>
                        {% endif %}

                    </td>
                </tr>
                {% endfor %}

            </tbody>
        </table>
    </div>
</div>



<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>


<style>
    select {
        display: none;
    }
</style>

<script>

    $(document).ready(function () {
        $('#myTable').DataTable();
    });
</script>

<script>

    $('.blockBtn').click(function () {

        Swal.fire({
            title: 'Are you sure?',
            text: "",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes'
        }).then((result) => {
            if (result.isConfirmed) {
                var id = $(this).attr('data-id');
                window.location = "block?id=" + id
            }
        })

    });

</script>
{% endblock %}